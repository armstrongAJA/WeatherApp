<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Holiday Approval</title>
  
  <script>
    window.onload = function() {
      const params = new URLSearchParams(window.location.search);
      
      // extract parameters
      const baseUrl = params.get("baseurl"); 
      const itemid = params.get("itemid"); // read from query string
      
      //buildURL
      const fullUrl = decodeURIComponent(baseUrl) + "&itemid=" + encodeURIComponent(itemid);
      const successString = "The holiday has been approved.<br>You may now close this window.";
      const failedString = "The holiday approval failed.<br>Please try again, or contact your system administrator if the problem persists.";
      
      // do a GET on the url to trigger the flow and change the text displayed on the site.
      fetch(fullUrl, { method: "GET" })
        .then(() => {
          document.getElementById('display-text').innerHTML = successString;
          //document.getElementById('display-text').textContent = successString;
          console.log("The GET request attempt was successful.");
        })
        .catch(() => {
          document.getElementById('display-text').innerHTML = failedString;
          console.log("The GET request attempt failed.");
        })
        .finally(() => {
          console.log("The GET request attempt has finished.");
        });

    };
  </script>
  
  <style>
  body, html {
    height: 100%;
    margin: 0;
  }

  .center-container {
    display: flex;
    justify-content: center;  /* Center horizontally */
    align-items: center;      /* Center vertically */
    height: 100vh;            /* Full viewport height */
  }

  .centered-box {
    padding: 20px;
    background-color: #f0f0f0;
    border: 1px solid #ccc;
    border-radius: 10px;
  }
</style>
  
</head>
<body>
<div class="center-container">
  <div class="centered-box">
    <h1 id="display-text">Loading...</h1>
  </div>
</div>
</body>
</html>
